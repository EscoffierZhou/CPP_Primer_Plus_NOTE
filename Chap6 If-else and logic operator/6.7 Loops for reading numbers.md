# 6.7 Loops for reading numbers

假设需要一个读取一系列数字的程序,允许用户在数组填满前结束输入

>   如果用户输入字母:n不变,输入仍在输入队列,`cin`对象错误标记并返回`false`

```cpp
// 6.13 cinfish.cpp
#include<iostream>
const int Max = 5;
int main()
{
	using namespace std;
    double fish[Max];
    int i = 0;
    // 一种自动化方法,读取没到上限就继续存
    while (i < Max && cin >> fish[i]) 
    {
        if (++i < Max)
            cout << "fish#" << i+1 << ":";
    }
    double total = 0.0;
    for (int j = 0; j < i;j++)
        total += fish[j];
    if(i == 0)
        cout << "No fish";
    else
        cout << "Average" << total/i << endl;
    return 0;
}
```

**一个输入错误内容后重置的代码板**

>   ```cpp
>   if(!cin)   // 在输入要求的"非数值的元素后"要停止输入
>   {
>       cin.clear(); // 重置输入缓存
>       cin.get();   // 读取
>   }
>   cin.get();	// 正式的读取代码
>   cin.get();  // 终止后等待用户回车键
>   ```
>
>   1.重置cin以接受新的输入
>
>   2.删除错误输入
>
>   3.提示用户再输入

```cpp
// cingolf.cpp
#include<iostream>
const int MAX = 5;
int main()
{
    using namespace std;
    int golf[MAX];
    int i;
    for (i = 0;i < MAX;i++)
    {
        cout << "round # "<< i+1 << ": ";
        // 也是一种自动化的while,如果读取到数据,则重置输入并判断
        while(!(cin >> golf[i]))
        {
            cin.clear();
            while(cin.get() != '\n')
                continue;
        }
    }
    double total = 0.0;
    for (i = 0;i < MAX;i++)
        total += golf[i];
    cout << total/MAX << endl;
    return 0;
}
```

