# 8.6 Homework

## 1.总结

C++扩展了C语言的函数功能。通过将inline关键字用于函数定义，并在首次调用该函数前提供其函数定义，可以使得C++编译器将该函数视为内联函数。也就是说，编译器不是让程序跳到独立的代码段，以执行函数，而是用相应的代码替换函数调用。只有在函数很短时才能采用内联方式。

引用变量是一种伪装指针，它允许为**变量创建别名**（另一个名称）。引用变量主要被用作处理结构和类对象的函数的参数。通常，被声明为特定类型引用的标识符只能指向这种类型的数据；然而，如果一个类（如`ofstream`）是从另一个类（如`ostream`）派生出来的，则基类引用可以指向派生类对象。

C++原型让您能够定义参数的默认值。如果函数调用省略了相应的参数，则程序将使用默认值；如果函数调用提供了参数值，则程序将使用这个值（而不是默认值）。只能在参数列表中从右到左提供默认参数。因此，如果为某个参数提供了默认值，则必须为该参数右边所有的参数提供默认值。

函数的特征标是其参数列表。程序员可以定义两个同名函数，只要其特征标不同。这被称为函数多态或函数重载。通常，通过重载函数来为不同的数据类型提供相同的服务。

函数模板自动完成重载函数的过程。只需使用泛型和具体算法来定义函数，编译器将为程序中使用的特定参数类型生成正确的函数定义。

## 2.Homework

1．哪种函数适合定义为内联函数？

>   **只有一行代码的小型、非递归函数适合作为内联函数**

2．假设song( )函数的原型如下：

```cpp
void song(const char * name,int times);
```

>   a．如何修改原型，使times的默认值为1？
>
>   >   换成`int times = 1`
>
>   b．函数定义需要做哪些修改？
>
>   >不需要,把分号删掉可以直接开始定义,不做定义修改也行
>
>   c．能否为name提供默认值“O. My Papa”？
>
>   >   可

3．编写`iquote( )`的重载版本——显示其用双引号括起的参数。编写3个版本：一个用于int参数，一个用于double参数，另一个用于string参数。

>```cpp
>#include<iostream.h>
>void iquote(int n)
>{
>    cout << "\"" << n << "\"";
>}
>void iquote(double x)
>{
>    cout << '"' << x << '"';
>}
>void iquote(const char * str)
>{
>	cout << "\"" << str << "\"";
>}
>```

4．下面是一个结构模板：

```cpp
struct box
{
    char maker[40];
    float height;
    float width;
    float length;
    float volume;
}
```

>a．请编写一个函数，它将box结构的引用作为形参，并显示每个成员的值。
>
>```cpp
>void show_box(const box & container)
>{
>    cout << container.maker << endl;
>    cout << container.height << endl;
>    cout << container.width << endl;
>    cout << container.volume << endl;
>}
>```
>
>b．请编写一个函数，它将box结构的引用作为形参，并将volume成员设置为其他3边的乘积。
>
>```cpp
>void set_volume(box & create)
>{
>	create.volume = create.height * create.width * create.length;
>}
>```

5．为让函数fill()和show()使用引用参数，需要对程序清单7.15做哪些修改？

>   ```cpp
>   void fill(std::array<double,Seansons> &pa);
>   void show(const std::array<double,Seasons> &da);
>   fill(expenses);
>   void fill(std::array<double,Seansons> & pa)
>   {
>   	using namespace std;
>       for(int i = 0;i < seansons;i++)
>       {
>           cout << "Enter"<< endl;
>           cin >> pa[i]; // (*pa)[i]变成这种简单的
>       }
>   }
>   void Show(std::array<double,Seansons> & da);
>   ```

6．指出下面每个目标是否可以使用默认参数或函数重载完成，或
者这两种方法都无法完成，并提供合适的原型。

>   a．mass(density, volume)返回密度为density、体积为volume的物体
>   的质量，而mass(denstity)返回密度为density、体积为1.0立方米的物体的
>   质量。这些值的类型都为double。
>
>   >   ```cpp
>   >   double mass(double d,double v = 1.0); // 默认值
>   >   double mass(double d,double v);
>   >   double mass(double d); // 重载,v自定义
>   >   ```
>
>   b．repeat(10, “I'm OK”)将指定的字符串显示10次，而repeat(“But
>   you're kind of stupid”)将指定的字符串显示5次。
>
>   >   ```cpp
>   >   void repeat(int times,const char * str);
>   >   void repeat(const char * str); //重载
>   >   ```
>
>   c．average(3, 6)返回两个int参数的平均值（int类型），而
>   average(3.0, 6.0)返回两个double值的平均值（double类型）。
>
>   >```cpp
>   >int average(int a,int b);
>   >double average(double x ,double y); //重载
>   >```
>
>   d．mangle(“I'm glad to meet you”)根据是将值赋给char变量还是char*
>   变量，分别返回字符I和指向字符串“I'm mad to gleet you”的指针。
>
>   >   **两个版本的params类型相同**

7．编写返回两个参数中较大值的函数模板。

>   ```cpp
>   template<typename T>
>   T max(T t1,T t2)
>   {
>       return t1>t2?t1:t2;
>   }
>   ```

8．给定复习题6的模板和复习题4的box结构，提供一个模板具体
化，它接受两个box参数，并返回体积较大的一个。

>   ```cpp
>   template<>box max(box b1,box b2)
>   {
>       return b1.volume > b2.volume?b1:b2;
>   }
>   ```

9．在下述代码（假定这些代码是一个完整程序的一部分）中，
v1、v2、v3、v4和v5分别是哪种类型？

````cpp
int g(int x);
float m = 5.5f;
float &rm = m;
decltype(m) v1 = m;	// float
decltype(rm) v2 = m;//float &
decltype((m)) v3 = m;// float &
decltype (g(100)) v4;// int 
decltype (2.0 * m) v5;// double
````

