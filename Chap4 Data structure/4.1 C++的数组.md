# 4.1 C++的数组

## **1.数组的定义**

数组是一种数据格式,能够存储**多个同类型的值**

数组的声明有三点(声明要点是`[]`,`[]`中说明`Arraysize`

1.存储在每个元素的值的类型

2.数组名

3.数组中的元素数

(`Arraysize`不能是变量,必须是整型常数或者const值,也可以是常量表达式)

>   比如`8 * sizeof(int)`
>
>   但是可以使用new运算符来避开这种限制

****

## **2.数组的初始化规则**

**其次数组的序号是从0号开始,其次数组的初始化方式是使用大括号`{}`**

```cpp
//4.1 arrayone.cpp
#include<iostream>
int main()
{
    using namespace std;
    int yams[3];
    yams[0] = 7;
    yams[1] = 8;
    yams[2] = 6;
    int yamcosts[3] = {20,30,5};
    cout << "Total yams" << yams[0] + yams[1] + yams[2] << endl;
    cout << "Total size" <<  sizeof(yams) << endl;  // 12 (int*3)
    cout << "Single size" << sizeof(yams[0]) << endl; // 4(int)  
    cout << "Multiply" << yams[0] * yamcosts[0] << endl; // 140 = 7*20
    return 0;
}
```

**1.数组初始化方法:**

**使用`{}`**,如果对应位置没有元素,则该元素值是不确定的

>   提供的值可以少于数组的元素数目:`int a[4] = {0,1,2};`
>
>   >**其余数值会自动被设置为`0`**
>
>   提供的数组大小可以为空:`int a[] = {1,3,5,8};`
>   
>   >**一般视为很坏的做法,因为人为因素导致列表遗漏**
>   >
>   >但是对于字符数组初始化比较安全
>   
>   花括号为整个数组赋值,单个元素使用不合法:`int a[0]={1,2,3};(不合法)`
>   
>   **不能将一个数组直接赋给另一个数组(比如`hand = cards;`)**

****

**2.C++对数组越界的态度**

C++不进行强制的数组边界检查(为了避免性能开销)

但是`std::array`中存在`at()`成员,会在访问元素前进行边界检查

****

**3.求得数组大小**

对于前面的`sizeof()`,它其实返回的是该类型元素的字节大小,并非个数

所以需要`int count = sizeof(array) / sizeof(array[0]) // 元素类型相同`

****

## **3.(C++11)数组初始化方法**

1.初始化数组的时候可以省略等号:

>   ```cpp
>   double earnings[4] {1.2e4,1.6e4,1.7e4,1.1e4};
>   ```

2.大括号内元素可以为空

>   ```cpp
>   unsigned int counts[10] = {} //所有元素初始化为0
>   float balances[100]{} // C++11
>   ```

3.列表初始化进制缩窄转换(C++11直接报错)

>```cpp
>long a[] = {25,92,3.0} // long int中存在小数
>char c[] = {'h','i',1122011} //不合法只能到128
>char n[] = {'h','i',112} //合法
>```
