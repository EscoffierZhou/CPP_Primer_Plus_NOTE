# 4.4 C++的结构体

结构是用户定义的类型,结构定义了这种类型的数据属性

>步骤1:定义结构表述(结构中的给中数据类型)
>
>步骤2:按照描述创建结构变量(结构数据对象)
>
>```cpp
>struct inflatable
>{
>    char name[20];
>    flaot volume;
>    double price;
>};
>
>inflatable hat; // 创建的实际变量
>// struct inflatable hat // C中的结构体声明
>```

****

## **1.在程序中使用结构**

(注意声明位置和作用域)

```cpp
// 4.11 structur.cpp
#include<iostream>
struct inflatable
{
   char name[20];
   float volume;
   double price;
};
int main()
{
    using namespace std;
    inflatable guest = {
        "glorious Gloria", // name
         1.88,
         29.99
    };
    static inflatable pal = {
        "Audacious", // name
         1.88,
         29.99
    };
    cout << guest.name << endl;
    cout << pal.name << endl;
    cout << guest.price + pal.price << endl;
    return 0;
}
```

## 2.(C++11)结构初始化

**(可以省略`=`)**

```cpp
#include<iostream>
struct inflatable
{
   char name[20];
   float volume;
   double price;
};
int main()
{
    using namespace std;
    inflatable guest {"glorious Gloria",1.88,29.99};
}
```

>   同时`{}`内部可以为空,表述各个成员都被设置为0
>
>   依然不允许缩窄转换0

****

## 3.string类作为成员

```cpp
// string类是合法的
#include<string>
struct inflatable
{
  	std::string name;
    float volume;
    double price;
};
```

****

## 4.其它结构属性

1.可以将结构作为参数传递给函数,也可以让函数返回一个结构

2.可以使用赋值运算符将结构赋值 给 另一个同类型的结构(即使成员是数组)

```cpp
//4.12 assgn_st.cpp
#include<iostream>
struct inflatable
{
    char name[20];
    float volume;
    double price;
};
int main()
{
    using namespace std;
    inflatable bouquet = 
    {
        "sunflowers",
        0.20,
        12.49
    };
    inflatable choice;
    cout << bouquet.name << endl;
    cout << bouquet.price <<  endl;
    choice = bouquet
    cout << choice.name << endl; // 最后的结果相同
    return 0;
}
```

3.可以直接完成结构体+结构变量初始化

```cpp
struct perks{
    int key_numbers;
    char car[12];
}mr_smith,ms_jones;

// 甚至
struct perks{
    int key_numbers;
    char car[12];
}mr_smith=
{
    7,
    "Audi"
};
```

4.可以创建无名称的结构体(不推荐)

```cpp
struct {            // 以后将无法访问
    int key_numbers;
    char car[12];
}mr_smith,ms_jones
```

****

## 5.结构体数组

可以创建一个元素为结构体的数组

```cpp
inflatable gifts[100]; // 创建的对象是一个数组,大小为100的结构体组成的数组
// 对于每个结构体实例都可以访问
cout << gift[0].volume;
cout << gift[99].price << endl;
// cout << gift.price是不合法的(不知道输出哪个结构体的值)
```

可以按照初始化数组的方式初始化结构体的数组

```cpp
//4.13 assgn_st.cpp
#include<iostream>
struct inflatable
{
    char name[20];
    float volume;
    double price;
};
int main()
{
    inflatable guests[2] = {
        {"Baby", 0.5 , 22.99},
        {"CIEL", 0.1 , 5.01}
    };
    cout << guest[0].name << endl;
    cout << guest[0].volume + guests[1].volume << endl;
    return 0;
}
```

****

## 6.结构体中的位字段

和C语言一样,C++允许指定**占用特定位数**的结构体成员,应该是整型或枚举

```cpp
// 控制结构体或类中 成员变量占用比特位数量的计数
// 比如对于flag,只需要0或1,而不需要每次都是8bit
// 比如嵌入式开发/硬件设备
struct torgle_register
{
    unsigned int SN : 4; // SN的值使用4个bit
	unsigned int : 4	 // 这里没有变量名,让编译器空出4个比特位
    bool goodIn : 1		// 有效存储布尔变量的方法:0或1
    bool goodTorgle : 1
};
```



