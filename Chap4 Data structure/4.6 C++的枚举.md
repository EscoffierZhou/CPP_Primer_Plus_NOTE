# 4.6 C++的枚举

C++的`enum`工具是第二种创建符号常量的方式(第一种是`const`)

`enum enumeration_name{enumerator1 , enumerator2 , ... , enumeratorn};`

```cpp
enum spectrum{
    red,
    orange,
    yellow,
    green
};
spectrum band;
band = blue;
//band = 100 // INVALID,not a enumrator
```

**需要注意的是,`enum`成员(enumerator)本质上是带名字的`const int`**

>   隐式类型提升(`enum`->`int`),反过来不行,并非重载
>
>   ```cpp
>   enum Color {
>       red,    // 默认值为 0
>       green,  // 默认值为 1
>       blue    // 默认值为 2
>   };
>   Color color;
>   color = 3 + red; // 3+0=3
>   
>   // 甚至可以自定义起始值
>   enum Shape {
>       circle = 10,
>       square,      // 值为 11
>       triangle = 20
>   };
>   ```
>
>   `int`不能赋给`enum`:
>
>   ```cpp
>   #include <iostream>
>   using namespace std;
>   
>   int main()
>   {
>      enum Color {
>           red,    // 默认值为 0
>           green,  // 默认值为 1
>           blue    // 默认值为 2
>       };
>   	Color color;
>   	int result = 3 + red;
>   	//color = 3 + red; // 3+0=3
>   	cout << result << endl;
>   	// color = result // INVALID
>   	color = static_cast<Color>(result); // 可以显示赋值转换
>   	cout << color << endl;
>   	return 0;
>   }
>   ```
>
>   **枚举`enum`类型只有赋值运算符,没有运算符**
>
>   ```cpp
>   Color color;
>   color = color + 1 // INVALID ,先转为int相加,又赋值给enum
>   int result = color + 1 // VALID
>   color++;		  // INVALID
>   ```
>
>   

**C++11中的`enum class`**

>   `enum class`禁止了危险的隐式类型转换

## 1.`enum`的赋值

可以使用赋值运算符显式设置枚举量的值**(必须是整数)**

```cpp
enum bits {one = 1,two = 2,four = 4,eight = 8};
```

可以只赋值一部份值(后面的值一次+1)

```cpp
enum bits {one = 1,two,four = 4,eight}; // 1,2,4,5
```

可以创建多个值相同的`enumerator`

```cpp
enum{zero ,null = 0,one  numero_uno = 1};
```

**在新版本中,除了可以使用`int`赋值,还可以使用`long`/`long long`**

## 2.`enum`的取值范围

**C++的强制类型转换,增加了可赋给枚举变量的合法值(和对应的取值范围)**

```cpp
enum bits {one = 1,two = 2,four = 4,eight = 8};
bits myflag; myflag = bits(6) // VALID
```

**取值范围计算技巧**

>**计算上限**
>
>1.找到上限(枚举的最大值):假如是`101`
>
>2.找到最接近比上限大的2的幂 - 1 :这里是`2^7 = 128 - 1 = 127`
>
>**计算下限**
>
>1.如果最小的枚举值是`0`或者正数,那么下限就是0
>
>2.如果最小的枚举值是负数,找到下限,找到最接近比上限小的2的幂+1
>
>(比如`-6`,找到`-2^3 = -8 + 1 = -7`)