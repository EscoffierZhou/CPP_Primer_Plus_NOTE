# 4.3 C++的string类

## 1.C++11字符串初始化

```cpp
char first_date[] = {"Le chapon"};
char second_date[]{"The Elegant Plate"};
string third_Date = {"The Bread"};
string fourth_Date{"The strawberry"};
```

## 2.赋值\拼接和附加

```cpp
// C++11 Initialize
char c1[20] // empty
char c1[20] = "string1" //initialized
string str1;// empty
string str2 = "panther" //initialized
c1 = c2  INVALID!! 
string str1 = str2; //Valid
```

```cpp
// C++11 concatenate
string str3
str3 = str1 + str2;  // new string
str += str2; // 在str最后拼接上str2
```

```cpp
// Example 4.8 strtype2.cpp
# include<iostream>
# include<string>
int main()
{
    using namespace std;
    string s1 = "penguin";
    string s2,s3;
    s2= s1;
    cout << s1 << s2 << endl;
    s2 = "buzzard";
    cout << s2 << endl;
    s3 = s1 + s2;
    cout << s3 << endl;
    s1 += s2;
    cout << s1 << endl;
}
```

## 3.其它`string`类的操作

>`strcpy(c1,c2)`:将c2的内容复制到c1中
>
>`strcat(c1,"string")`:将内容string加入c1的结尾
>
>`len = str.size = strlen(str);`:获得当前字符串的长度

>(存在问题:目标数组过小,无法存储指定信息)
>
>`strncpy(c1,c2,MAX_LEN)`:将c2的内容复制到c1中(按照ML)
>
>`strncat(c1,"string",MAX_LEN)`:将内容string加入c1的结尾(按照ML)

****

## 4.string类I/O

```cpp
// 4.10 strtype4.cpp
#include<iostream>
#include<string>  
#include<cstring> // C-style
int main()
{
    using namespace std;
    char charr[20];
    string str;
    
    cout << strlen(charr) << endl;
    cout << str.size() << endl;
    
    cin.getline(charr,20); // istream的一个类方法,处理int/float专用
    cout << charr << endl;
    getline(cin,str);      // 并非类方法,但是是处理string专用
    // C++ istream的设计没有考虑string
    cout << str << endl;
    cout << strlen(str) << endl;
    cout << str.size() <<endl; 
}
```

**需要注意的是,没有初始化的数据,第一个空字符的出现位置是随机的**

>   **(会直接导致每次求导的数组长度不同)**

****

## 5.其它形式的字符串字面值

比如除了`char`类型外还有`wcchar_t`(C++98)/`char16_t`和`char32_t`(C++11)

对于这些类型的**数组和字符串字面值**,C++使用前缀进行表示

```cpp
wchar_t title[] = L"Chief";
char16_t name[] = u"Felonia";
char32_t car[] = U"Humber";
```

**C++11中还支持`Unicode:UTF-8`以及`raw`**原始字符串R

>   `cout << R"(CIEL is "very" beautiful "\n")" << '\n';`
>
>   输出的是`CIEL is "very" beautiful "\n"`保留\n并非消去
>
>   如果是标准字符串,则需要如下写:
>
>   ``cout << R"(CIEL is \"very \" beautiful \"\\n\")" << '\n';``
>
>   同时需要注意`)"`会导致提前截断,所以使用`R"+*(string)+*"" << endl;`