# 5.5 text-input

其实C++的input就是通过循环编入的

## **1.使用原始的cin输入**

```cpp
// 5.16 textin1.cpp
#include<iostream>
int main()
{
    using namespace std;
    char ch;
    int count = 0;
    cin >> ch;
    while(ch != '#')
    {
        cout << ch;
        ++countl
        cin >> ch;
    }
    cout << endl << count << "numbers read."<< endl;
    return 0;
}
```

>   增加了哨兵字符(`#`)

## **2.使用`cin.get(char)`**

逐个输入的程序需要检查每个字符(包括空格/换行符)

```cpp
// textin2.cpp
#include<iostream>
int main()
{
	using namespace std;
    char ch;
    int count = 0;
    cin.get(ch);
    while(cj != '#')
    {
        cout << ch;
        ++count;
        cin.get(ch);
    }
    cout << endl << count << " characters read" << endl;
    return 0;
}
```

>   **需要注意的是,`cin.get()`修改的是`ch`的值,既然要修改就要调用地址**
>
>   在C++中,传入的是对象名`ch`也可以,但是C语言中必须传入`&ch`

## 3.使用哪一个`cin.get()`

`cin.get(name,ArSize)`接受了两个参数:`char*`的数组和`int`整数

>   这里也是C++的特性,可以传入多种参数进行多种重载函数的创建
>
>   在这里就是接收了两个版本的`cin.get()`

## 4.文件尾条件

在程序中可以显式地描述文件尾条件(输入为'`#`'的时候截止)

>   `Linux`中可以通过`Ctrl+D`实现
>
>   `Windows`中可以通过`Ctrl+z`或者`Enter`实现

**检测到EOF文件尾的时候,cin将`eofbit`和`failbit`都设置为1**

>   ```cpp
>   // 5.18 textin3.cpp
>   #include<iostream>
>   int main()
>   {
>       using namespace std;
>       char ch;
>       int count = 0;
>       cin.get(ch);
>       while(cin.fail == false)
>       {
>           cout << ch;
>           ++count;
>           cin.get(ch);
>       }
>       cout << endl << count << " characters read" << endl;
>       return 0;
>   }
>   ```

## 5.怀旧服`cin.get()`

调用`stdio.h`或者`cstdio`既可使用`getchar()`和`putchar()`

```cpp
char ch;
cin.get(ch);
while(cin.fail() == false) // EOF
{
    cout << ch;
    ++count;
    cin.get(ch);
}
```

>   可以使用`int ch`并使用`cin.get()`代替`cin.get(char)`
>
>   使用`cout.put()`代替`cout`
>
>   使用`EOF`测试代替`cin.fail()`测试

```cpp
// textin4.cpp
#include<iostream>
int main(void)
{
    using namespace std;
    int ch;
    int count = 0;
    while((ch = cin.get()) != EOF)
    {
        cout.put(char(ch));
        ++count;
    }
    cout << endl << count << " characters read " << endl;
    return 0;
}
```

